{% extends 'base.html' %}  
{% block content %}
  {% include "dashboard/components/navbarmain.html" %}
  <div id="page-wrapper">
    <div class="row">
      <div class="col-lg-12">
        {% include 'messages/messages.html' %}
      </div>
    </div>
    <div class="row">
      <div class="col-lg-12">
        <h1 class="page-header">Vendors</h1>
      </div>
    </div>
    <div class="row">
      <div class="col-lg-12">
        <div class="panel panel-default">
          <div class='panel-heading'>
            Data
          </div>
          <div class='panel-body'>
            <div class='dataTable_wrapper'>
              <table id="vendor" class="responsive table table-striped table-bordered" cellspacing="0" width="100%">
                <thead>
                  <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Address</th>
                    <th>City</th>
                    <th>State</th>
                    <th>Zip</th>
                    <th data-priority="-4">Description</th>
                    <th>Website</th>
                    <th>Phone</th>
                    <th>Email</th>
                    <th>Date Joined</th>
                  </tr>
                </thead>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
<script>
  $.ajaxSetup({ 
    beforeSend: function(xhr, settings) {
      xhr.setRequestHeader("X-CSRFToken", "{{csrf_token}}")
    }
  })
  editor = new $.fn.dataTable.Editor({
    ajax: '/store/Vendor/',
    table: '#vendor',
    idSrc : 'id',
    fields: [
      {
        label: "Name",
        name : "name",
      }, { 
        label: "Address",
        name : "address",
      }, {
        label: "City",
        name : "city",
      }, {
        label: "State",
        name : "state",
      }, {
        label: "Zipcode",
        name : "zip",
      }, {
        label: "Description",
        name : "description",
      }, {
        label: "Website",
        name : "website_url",
      }, {
        label: "Phone Number",
        name : "phone_number"
      }, {
        label: "Email",
        name : "email"
      }, {
        label: "Date Joined",
        name : "date_joined"
      }
    ]
  }); 
  $('#vendor').on( 'click', 'tbody td, tbody span.dtr-data', function (e) {
    // Ignore the Responsive control and checkbox columns
      if ($(this).hasClass( 'control' )) 
        return 
      editor.inline( this, {
        onBlur: 'submit'
      });
  });
  var vendor_table = $('#vendor').DataTable({
    dom: "Bfrtip",
    ajax: '/store/Vendor/',
    responsive: true,
    columns: [
      {
        data : "id",
        className: 'control'
      },
      { data : "name"},
      { data : "address"},
      { data : "city"},
      { data : "state"},
      { data : "zip"},
      { data : "description"},
      { data : "website_url"},
      { data : "phone_number"},
      { data : "email"},
      { data : "date_joined"}
    ],
    order: [ 1, 'asc' ],
    select: {
      style:    'os',
      selector: 'td.select-checkbox'
   },
    buttons : [
      { 
        extend: "create",
        editor : editor
      },
      { 
        extend :"edit",
        editor : editor
      },
      { 
        extend: "remove",
        editor : editor
      }
    ]      
  });
</script>
{% endblock %}
